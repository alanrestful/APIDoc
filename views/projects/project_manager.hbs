{{> header}}
<div class="container-fluid">
  <div class="row">

    <div class="col-sm-3 col-md-2 sidebar">
      <a style="text-decoration: none;" data-toggle="modal" data-target="#createProjectModal" href="#">新建项目</a>
      <hr style="margin: 5px auto;">
      <ul class="nav nav-sidebar">
        {{#each projects}}
          <li><a href="/projects?id={{this.id}}">{{this.name}}</a></li>
        {{/each}}
      </ul>
    </div>

    <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
      <h3 class="page-header">
        应用列表
        {{#if applications}}
          <a style="float:right;font-size:14px;line-height:40px;text-decoration: none;" data-toggle="modal" data-target="#createApplicationModal" href="#">新建应用</a>
        {{/if}}
      </h3>
      <div class="row placeholders">
        {{#if applications}}
          {{#each applications}}
            <a href="/applications?id={{this.id}}">
              <div class="col-xs-6 col-sm-3 placeholder">
                <img class="img-responsive" style="width:200px;height:200px;" alt="200x200" src="{{#if this.avatar}}{{this.avatar}}{{else}}./images/avatar.png{{/if}}" data-holder-rendered="true">
                <h4>{{this.name}}</h4>
                <span class="text-muted">{{this.tag}}</span>
              </div>
            </a>
          {{/each}}
        {{else}}
          {{#if _id}}
            该项目未创建应用，现在<a data-toggle="modal" data-target="#createApplicationModal" href="#">新建应用</a>
          {{else}}
            请选择项目进行应用管理。
          {{/if}}
        {{/if}}
      </div>
    </div>

  </div>

  <!-- 创建项目 -->
  <div class="modal fade" id="createProjectModal" tabindex="-1" role="dialog" aria-labelledby="createProjectModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
      <form action="/projects" method="post" class="create-project-form">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
            &times;
          </button>
          <h4 class="modal-title" id="createProjectModalLabel">
            新建项目
          </h4>
        </div>
        <div class="modal-body">
          <div class="form-group">
              <label>项目名称</label>
              <input type="text" class="form-control" placeholder="请填写项目名称" name="name" required>
          </div>
          <div class="form-group">
              <label>项目备注</label>
              <input type="text" class="form-control" placeholder="请填写项目备注" name="tag" required>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">关闭
          </button>
          <button type="submit" class="btn btn-primary">
            提交
          </button>
        </div>
      </form>
      </div><!-- /.modal-content -->
    </div><!-- /.modal -->
  </div>

  <!-- 创建应用 -->
  <div class="modal fade" id="createApplicationModal" tabindex="-1" role="dialog" aria-labelledby="createApplicationModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
      <form action="/applications" method="post" class="create-application-form" enctype="multipart/form-data">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
            &times;
          </button>
          <h4 class="modal-title" id="createApplicationModalLabel">
            新建应用
          </h4>
        </div>
        <div class="modal-body">
          <input type="hidden" name="projectId" value="{{_id}}">
          <div class="form-group">
            <label>应用名称</label>
            <input type="text" class="form-control" placeholder="请填写应用名称" name="name" required>
          </div>
          <div class="form-group">
            <label>应用备注</label>
            <input type="text" class="form-control" placeholder="请填写应用备注" name="tag">
          </div>
          <div class="form-group">
            <label>应用图标</label>
            <input type="file" name="appAvatar">
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">关闭
          </button>
          <button type="submit" class="btn btn-primary">
            提交
          </button>
        </div>
      </form>
      </div><!-- /.modal-content -->
    </div><!-- /.modal -->
  </div>

</div>
<link href="./stylesheets/dashboard.css" rel="stylesheet">
